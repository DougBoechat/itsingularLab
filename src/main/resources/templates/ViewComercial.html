<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<div th:insert="Header.html"></div>
<script>
	$(function() {
		// Sidebar toggle behavior
		$('#sidebarCollapse').on('click', function() {
			$('#sidebar, #content').toggleClass('active');
		});
	});
</script>

<body>
	<div class="d-flex">
	<div th:replace="Menu :: menu">...</div>
	<div class="container" id="content">
		<h3 align="center">Lista Comercial</h3>
		<br /> <br />
		<button id="sidebarCollapse" type="button"
			class="btn btn-light bg-white rounded-pill shadow-sm">
			<i class="fa fa-bars mr-2"></i><small
				class="text-uppercase font-weight-bold">Menu</small>
		</button>
		<div class="panel-body">

			<form th:action="@{/comercial/filtrar}" method="GET" class="form-horizontal">
				<div class="form-group">
					<div class="col-sm-6">
						<div class="input-group">
							<input class="form-control" name="filtro" id="filtro" placeholder="Filtrar requisição" autofocus="autofocus" th:value="${filtro}"/>
								<span class="input-group-btn">
								<button type="submit" class="btn btn-default">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</span>
						</div>
					</div>
				</div>
			</form>

			<div class="table-responsive">
				<table class="table table-bordered table-striped">
					<thead class="thead-light">
						<tr>
							<th class="text-center col-md-2">Data Solicitação</th>
							<th class="text-center col-md-2">Cliente</th>
							<th class="text-center col-md-3">Solicitante</th>
							<th class="text-center col-md-2">Ramo Atividade</th>
							<th class="text-center col-md-2">SLA (Dias)</th>
							<th class="text-center col-md-6">Status</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="requisicao: ${requisicoes.content}">
							<td class="text-center" th:text="${{requisicao.dataSolicitacao}}"></td>
							<td class="text-center" th:text="${{requisicao.cliente}}"></td>
							<td class="text-center" th:text="${{requisicao.nomeSolicitante}}"></td>
							<td class="text-center" th:text="${{requisicao.ramoAtividade}}"></td>
							<td class="text-center" th:style="${{requisicao.sla == 3 ? 'color: red;' : 'color: green;'}}" th:text="${{requisicao.sla}}"></td>
							<td class="text-center" th:attr="data-role=${requisicao.id}">
		   						<span class="label" th:text="${requisicao.status}"
		   							th:classappend="${requisicao.status == 'Pendente'? 'label-danger' : 'label-success'}">
		   						</span>
	   					</td>
						</tr>
						<tr>
							<td class="text-center col-md-2" colspan="6"
								th:if="${#lists.isEmpty(requisicoes)}">Requisição não encontrada</td>
						</tr>
					</tbody>
				</table>
			</div>
			<!--Pagination  -->
			<div id="bottom" class="row">
				<div class="col-md-12">
				<ul class="nav">
					<li th:if="${requisicoes.hasPrevious()}" class="nav item">
	                    <a class="page-link disabled" th:href="@{/comercial/informacoes(page=${requisicoes.number-1},size=${requisicoes.size})}">Anterior</a>
	                </li>
	                
	                <li class="nav item" th:each="i : ${#numbers.sequence(0, requisicoes.totalPages - 1)}">
	                    <a th:href="@{/comercial/informacoes(page=${i},size=${requisicoes.size})}" th:text="${i}" class="page-link"
	                       th:classappend="${currentPage}==${i}?'active':''">[[${i}+1]]</a>
	                </li>
	                
	                <li th:if="${requisicoes.hasNext()}" class="nav item" >
	                    <a class="page-link" th:href="@{/comercial/informacoes(page=${requisicoes.number+1},size=${requisicoes.size})}">Próximo</a>
	                </li>
	            </ul>
           	</div>
           </div>
		</div>
		</div>
	</div>
</body>
</html>